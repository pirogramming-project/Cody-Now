<!DOCTYPE html>
{% load static %}
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <!-- 상단바 다크 테마 설정 (모든 기기 대응) -->
    <meta name="theme-color" content="#000000" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="msapplication-navbutton-color" content="#000000" />

    <!-- PWA 관련 설정 -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="Cody Now" />
    <meta name="csrf-token" content="{{ csrf_token }}" />

    <title>{% block title %}Cody Now{% endblock title%}</title>
    <link rel="stylesheet" href="{% static 'root.css' %}" />
    <link rel="stylesheet" href="{% static 'base.css' %}" />

    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="{% static 'images/favicon/apple-icon-57x57.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="{% static 'images/favicon/apple-icon-60x60.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="{% static 'images/favicon/apple-icon-72x72.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="{% static 'images/favicon/apple-icon-76x76.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="{% static 'images/favicon/apple-icon-114x114.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="{% static 'images/favicon/apple-icon-120x120.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="{% static 'images/favicon/apple-icon-144x144.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="{% static 'images/favicon/apple-icon-152x152.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="{% static 'images/favicon/apple-icon-180x180.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="{% static 'images/favicon/android-icon-192x192.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="{% static 'images/favicon/favicon-32x32.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="{% static 'images/favicon/favicon-96x96.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="{% static 'images/favicon/favicon-16x16.png' %}"
    />
    <link rel="manifest" href="{% static 'images/favicon/manifest.json' %}" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta
      name="msapplication-TileImage"
      href="{% static 'images/favicon/ms-icon-144x144.png' %}"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <!-- 기본 SEO 메타 태그 -->
    <meta
      name="description"
      content="코디나우는 AI가 당신의 옷장을 분석하고 맞춤형 코디를 추천해주는 스마트 패션 서비스입니다. 매일 아침 옷 고르기가 즐거워집니다."
    />
    <meta
      name="keywords"
      content="코디나우, AI 코디, 패션 코디네이터, 옷장 관리, 스타일 추천, 인공지능 패션"
    />
    <!-- 네이버 SEO -->
    <meta
      name="naver-site-verification"
      content="28f6c1a8270f4223fc14bcb88ff90572f82433d6"
    />
    <meta
      name="naver-site-verification"
      content="185f73125698f542666d1b94c0593b1ace39a3fc"
    />
    <meta name="theme-color" content="#ffffff" />
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://codynow.com/" />
    <meta property="og:title" content="코디나우 - AI 기반 패션 코디네이터" />
    <meta
      property="og:description"
      content="AI가 분석하는 나만의 스타일, 매일 아침 새로운 코디 추천받기"
    />
    <meta
      property="og:image"
      content="https://codynow.com{% static 'images/og_image.png' %}"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="코디나우" />
    <meta property="og:locale" content="ko_KR" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://codynow.com/" />
    <meta name="twitter:title" content="코디나우 - AI 기반 패션 코디네이터" />
    <meta
      name="twitter:description"
      content="AI가 분석하는 나만의 스타일,  매일 아침 새로운 코디 추천받기"
    />
    <meta
      name="twitter:image"
      content="https://codynow.com{% static 'images/og_image.png' %}"
    />

    <!-- 네이버 블로그/카페 공유 -->
    <meta property="blog:published_time" content="2024-02-10T00:00:00+09:00" />
    <meta property="article:author" content="코디나우" />

    <!-- 카카오톡 미리보기 -->
    <meta property="al:web:url" content="https://codynow.com/" />
    <meta property="al:web:should_fallback" content="true" />
    {% block extra_css %}{% endblock extra_css%}
    <!-- 인 앱 브라우저 감지 및 리다이렉션 -->
    <script>
      (function () {
        const ua = navigator.userAgent || navigator.vendor || window.opera;
        const isInApp =
          ua.indexOf("KAKAOTALK") > -1 ||
          ua.indexOf("Instagram") > -1 ||
          ua.indexOf("FBAN") > -1 || // Facebook
          ua.indexOf("FBAV") > -1 || // Facebook
          ua.indexOf("Line") > -1 ||
          ua.indexOf("NAVER") > -1;

        if (isInApp) {
          const currentURL = window.location.href;
          const cleanURL = currentURL.replace(/^https?:\/\//, "");

          // Android - Chrome 리다이렉션
          if (ua.indexOf("Android") > -1) {
            location.href = `intent://${cleanURL}#Intent;scheme=https;package=com.android.chrome;end`;
          }
          // iOS - Chrome 리다이렉션
          else if (ua.indexOf("iPhone") > -1 || ua.indexOf("iPad") > -1) {
            // Chrome으로 시도
            location.href = `googlechrome://${cleanURL}`;

            // 1초 후 Safari로 폴백
            setTimeout(function () {
              location.href = `https://${cleanURL}`;
            }, 1000);
          }
        }
      })();
    </script>

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/x-icon"
      href="{% static 'images/favicon/favicon.ico' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="{% static 'images/favicon/apple-touch-icon.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="{% static 'images/favicon/favicon-32x32.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="{% static 'images/favicon/favicon-16x16.png' %}"
    />
    <link
      rel="manifest"
      href="{% static 'images/favicon/site.webmanifest' %}"
    />
  </head>
  <!-- Google Tag Manager -->
  <script>
    (function (w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
      j.async = true;
      j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-KGSTHW92");
  </script>
  <!-- End Google Tag Manager -->
  <!-- Google tag (gtag.js) -->
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=G-E3HJ4W0V4F"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "G-E3HJ4W0V4F");
  </script>

  <body>
    <header>
      <nav>
        <a href="{% url 'closet:dashboard' %}">
          <img
            src="{% static 'images/codynow_logo.svg' %}"
            alt="CodyNow Logo"
            width="120px"
          />
        </a>
        <ul>
          {% if user.is_authenticated %}
          <a href="{% url 'user:logout' %}" class="logout">로그아웃</a>
          <a href="{% url 'user:view_profile' %}">
            <img
              src="{% static 'images/mypage_icon.svg' %}"
              alt="mypage_icon"
              width="24.5625rem"
              height="5.375rem"
            />
          </a>
          {% endif %}
        </ul>
      </nav>
    </header>
    <main>{% block content %} {% endblock content %}</main>
    <div class="bottom-nav">
      <a
        href="https://forms.gle/m5BagQ3MKF9xHRYF6"
        class="bug-report"
        target="_blank"
      >
        🚨 버그 제보
      </a>
      <div class="bottomNav">
        <a href="{% url 'closet:dashboard' %}">
          <img
            src="{% static 'images/nav_home.svg' %}"
            class="nav-icon {% if request.path == '/' or request.resolver_match.url_name == 'dashboard' or not request.resolver_match.url_name %}active{% endif %}"
            alt="홈"
          />
        </a>
        <a href="{% url 'closet:upload_outfit' %}">
          <img
            src="{% static 'images/nav_ai_rec.svg' %}"
            class="nav-icon large {% if request.resolver_match.url_name == 'upload_outfit' %}active{% endif %}"
            alt="AI 추천"
          />
        </a>
        <a href="{% url 'closet:mycloset_view' %}">
          <img
            src="{% static 'images/nav_closet.svg' %}"
            class="nav-icon large {% if request.resolver_match.url_name == 'mycloset_view' %}active{% endif %}"
            alt="나의 옷장"
          />
        </a>
      </div>
    </div>

    {% block extra_js %}{% endblock extra_js %}
  </body>
  <!-- Google Tag Manager (noscript) -->
  <noscript
    ><iframe
      src="https://www.googletagmanager.com/ns.html?id=GTM-KGSTHW92"
      height="0"
      width="0"
      style="display: none; visibility: hidden"
    ></iframe
  ></noscript>
  <!-- End Google Tag Manager (noscript) -->
</html>
