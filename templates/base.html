{%load static%}
<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <!-- 상단바 다크 테마 설정 (모든 기기 대응) -->
    <meta name="theme-color" content="#000000" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="msapplication-navbutton-color" content="#000000" />

    <!-- PWA 관련 설정 -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="Cody Now" />

    <title>{% block title %}Cody Now{% endblock title%}</title>
    <link rel="stylesheet" href="{% static 'root.css' %}" />

    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="{% static 'images/favicon/apple-icon-57x57.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="{% static 'images/favicon/apple-icon-60x60.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="{% static 'images/favicon/apple-icon-72x72.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="{% static 'images/favicon/apple-icon-76x76.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="{% static 'images/favicon/apple-icon-114x114.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="{% static 'images/favicon/apple-icon-120x120.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="{% static 'images/favicon/apple-icon-144x144.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="{% static 'images/favicon/apple-icon-152x152.png' %}"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="{% static 'images/favicon/apple-icon-180x180.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="{% static 'images/favicon/android-icon-192x192.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="{% static 'images/favicon/favicon-32x32.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="{% static 'images/favicon/favicon-96x96.png' %}"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="{% static 'images/favicon/favicon-16x16.png' %}"
    />
    <link rel="manifest" href="{% static 'images/favicon/manifest.json' %}" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta
      name="msapplication-TileImage"
      href="{% static 'images/favicon/ms-icon-144x144.png' %}"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <meta name="theme-color" content="#ffffff" />
    <style>
      main {
        flex: 1; /* 남은 공간을 모두 차지 */
        width: 90%;
        padding-top: 3rem; /* header 높이만큼 여백 */
        padding-bottom: 4rem; /* bottom-nav 높이만큼 여백 */
        margin: 0 auto; /* 가운데 정렬 */
        box-sizing: border-box;
        min-height: 100vh;
        overflow-y: auto; /* 세로 스크롤 허용 */
        overflow-x: hidden; /* 가로 스크롤 방지 */
        scrollbar-width: none; /* Firefox에서 스크롤바 숨김 */
      }

      /* Chrome, Safari, Edge에서 스크롤바 숨기기 */
      main::-webkit-scrollbar {
        display: none;
      }

      header {
        background-image: url("{% static 'images/top-nav-background.svg' %}");
        background-size: cover; /* 배경 이미지가 요소를 덮도록 설정 */
        background-position: center; /* 배경 이미지가 중앙 정렬되도록 설정 */
        box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
        position: fixed;
        top: 0;
        z-index: 10;
        width: 100%;
        max-width: 600px;
      }

      nav {
        height: 4rem;
        padding-inline: 1rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      nav a img {
        height: 2rem;
      }
      ul {
        display: flex;
        align-items: center;
      }
      .logout {
        margin-bottom: 8px;
        color: #b2b2b2;
        font-family: Inter;
        font-size: 0.9375rem;
        font-style: normal;
        font-weight: 600;
        line-height: 180%; /* 1.6875rem */
      }
      ul > a > img {
        padding-inline: 0.5rem;
      }
      .bottom-nav {
        position: fixed;
        bottom: 0;
        z-index: 10;
        width: 100%;
        max-width: 600px;
      }
      .bottomNav {
        height: 3.5rem;
        z-index: 10;
        background-color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-inline: 3rem;
        border-top: 1px solid var(--color-gray-very-light);
      }
      .bug-report {
        position: fixed;
        right: 20px;
        bottom: 4rem; /* bottom-nav 높이만큼 띄움 */
        z-index: 9; /* bottom-nav보다 낮은 z-index */
        padding: 6px 10px;
        font-size: 11px;
        background-color: rgba(155, 27, 27, 0.8); /* 약간 투명하게 */
        color: white;
        text-decoration: none;
        border-radius: 4px;
        font-weight: 500;
        transition: all 0.3s ease;
        opacity: 0.7; /* 기본 상태는 약간 투명하게 */
      }

      .bug-report:hover {
        opacity: 1; /* 호버 시 완전 불투명하게 */
        background-color: rgb(155, 27, 27);
      }
    </style>
    {% block extra_css %}{% endblock extra_css%}
  </head>
  <!-- Google Tag Manager -->
  <script>
    (function (w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
      j.async = true;
      j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-KGSTHW92");
  </script>
  <!-- End Google Tag Manager -->
  <!-- Google tag (gtag.js) -->
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=G-E3HJ4W0V4F"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "G-E3HJ4W0V4F");
  </script>

  <body>
    <header>
      <nav>
        <a href="{% url 'closet:dashboard' %}">
          <img
            src="{% static 'images/codynow_logo.svg' %}"
            alt="CodyNow Logo"
            width="120px"
          />
        </a>
        <ul>
          {% if user.is_authenticated %}
          <a href="{% url 'user:logout' %}" class="logout">로그아웃</a>
          <a href="{% url 'user:edit_profile' %}">
            <img src="{% static 'images/mypage_icon.svg' %}" alt="mypage_icon"
            width= "24.5625rem" height: "5.375rem" />
          </a>
          {% endif %}
        </ul>
      </nav>
    </header>
    <main>{% block content %} {% endblock content %}</main>
    <div class="bottom-nav">
      <a
        href="https://forms.gle/m5BagQ3MKF9xHRYF6"
        class="bug-report"
        target="_blank"
      >
        🚨 버그 제보
      </a>
      <div class="bottomNav">
        <a href="{% url 'closet:dashboard' %}">
          <img src="{% static 'images/nav_home.svg' %}" width="25rem" />
        </a>
        <a href="{% url 'closet:closet_main' %}">
          <img src="{% static 'images/nav_closet.svg' %}" width="43rem" />
        </a>
        <a href="{% url 'closet:upload_outfit' %}">
          <img src="{% static 'images/nav_ai_rec.svg' %}" width="43rem" />
        </a>
      </div>
    </div>

    {% block extra_js %}{% endblock extra_js %}
  </body>
  <!-- Google Tag Manager (noscript) -->
  <noscript
    ><iframe
      src="https://www.googletagmanager.com/ns.html?id=GTM-KGSTHW92"
      height="0"
      width="0"
      style="display: none; visibility: hidden"
    ></iframe
  ></noscript>
  <!-- End Google Tag Manager (noscript) -->
</html>
