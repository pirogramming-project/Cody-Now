{% load static %}
<div id="upload-and-result-section">
  <div class="upload-section" id="upload-section">
    <h2>추천 기록 확인하기</h2>

    <div class="preview-container" id="preview-container">
      <!-- 옷 이미지 표시 (이미지 필드가 있는 경우) -->
      {% if outfit.image %}
      <img id="preview-image" class="preview-image" src="{{ outfit.image.url }}" alt="Outfit Image" style="max-width:300px;">
      {% elif outfit.image_url %}
        <img src="{{ outfit.image_url }}" alt="Outfit Image" style="max-width:300px;">
      {% endif %}
      
      <div class="upload-controls" id="upload-controls">
        <form method="POST" enctype="multipart/form-data">
          {% csrf_token %}
        </form>
        <div
          class="result-section"
          id="result-section"
          {%
          if
          ai_result
          %}
          style="display: block"
          {%
          else
          %}
          style="display: none"
          {%
          endif
          %}
        >

          <pre id="result"></pre>

          <!-- 수정하기 -->
          <div id="edit-section" class="edit-section" style="display: none">
            <label>Category: <input type="text" id="edit-category" /></label>
            <label>Fit: <input type="text" id="edit-fit" /></label>
            <label>Season: <input type="text" id="edit-season" /></label>
            <label>Style: <input type="text" id="edit-style" /></label>
            <label>Detail: <input type="text" id="edit-detail" /></label>

            <div class="edit-buttons">
              <button id="save-edit">저장</button>
              <button id="cancel-edit">취소</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="product-comment">
      <pre id="product-comment-tag"></pre>
    </div>   
  </div>
</div>
<hr />

<style>
  /* 전체 컨테이너 */
  #upload-and-result-section {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
  .preview-container {
    display: flex;

    text-align: center;
    margin-bottom: 15px;
  }
  .upload-section {
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* 남은 공간 차지 */
    gap: 10px;
    padding: 15px;
    background: white;
    border-radius: 10px;

    box-sizing: border-box;
  }
  .result-section {
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* 남은 공간 차지 */
    gap: 10px;
    padding: 15px;
    background: white;
    border-radius: 10px;
    width: 350px;
    box-sizing: border-box;
  }
  .product-comment {
    word-wrap: break-word; /* 긴 단어가 있으면 줄바꿈 */
    word-break: break-word; /* 자동 줄바꿈 */
    overflow-wrap: break-word; /* 줄바꿈 유지 */
    white-space: normal; /* 기존 nowrap이 적용되었을 가능성 차단 */
    max-width: 100%; /* 부모 컨테이너 내에서 넘치지 않도록 설정 */
    flex-direction: column;
  }
  .result-section {
    width: 100%;
  }

  /* 카테고리 정보 */
  .result-section {
    display: flex;
    flex-direction: column;
    gap: 3px;
  }

  .result-section p {
    font-size: 14px;
    display: flex;
  }

  .result-section .bold {
    font-weight: bold;
    margin-right: 8px;
  }

  /* 코디 추천받기 버튼과 추천 로딩바를 화면 하단 중앙에 고정 */
  /* #get-cody,
  #cody-loading {
    position: fixed;
    bottom: 60px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 3;
  }
  #get-cody:disabled {
    display: none;
  } */
</style>
