{% extends 'base.html' %} {% load static %}

{% block title %}History Recommendation{%endblock title %}

{% block content %}
{% include 'closet/home/slide_weather.html' %}<!-- 줄바꿈 유지 -->
{% include "closet/input_components/weather_section.html" %}<!-- 줄바꿈 유지 -->

{% include 'closet/input_components/error_section.html' %}
  <!-- 옷 이미지 표시 (이미지 필드가 있는 경우) -->
  <!-- {% if outfit.image %}
    <img src="{{ outfit.image.url }}" alt="Outfit Image" style="max-width:300px;">
  {% elif outfit.image_url %}
    <img src="{{ outfit.image_url }}" alt="Outfit Image" style="max-width:300px;">
  {% endif %} -->


  <!-- 이미지 분석 결과 출력 -->



<!-- 줄바꿈 유지 -->
<div id="recommendation_section_container" style="display: none">
  {% include 'closet/input_components/recommendation_section.html' %}
</div>

  <h2>이미지 분석 결과</h2>

  <div class="preview-container" id="history-preview-container">
    
    {% if outfit.image %}
    <img id="preview-image" class="preview-image" src="{{ outfit.image.url }}" alt="Outfit Image">
    {% elif outfit.image_url %}
      <img src="{{ outfit.image_url }}" alt="Outfit Image">
    {% endif %}      

    <div class="result-section" id="result-section" style="display: block;">
      <div class="info-containser">
        <div class="tags">
          {% for tag in tags %}
          <p class="tag-item">#{{ tag }}</p>
          {% endfor %}
        </div>
        <div class="show-result-section">
          <p><span>Category</span>{{ category }}</p>
          <p><span>Fit</span>{{ fit }}</p>
          <p><span>Season</span>{{ season }}</p>
          <p><span>Style</span>{{ design_style }}</p>
          <p><span>Detail</span>{{ detail }}</p>
        </div>
      </div>

      </div>
  </div>

  <div id="product-comment">
    <span>Product Comment</span>
    <p id="product-comment-tag">{{ overall_design }}</p>
  </div>

  
  <div class="recommendation-section" style="display: block;">
    <div id="recommendation-content">
        {% if recommendations %}
        <ul>
          {% for rec in recommendations %}
            <li>
              <!-- html_content를 safe 필터로 렌더링 -->
              <div>{{ rec.html_content|safe }}</div>
            </li>
          {% endfor %}
        </ul>
        {% else %}
          <p>이 옷에 대한 코디 추천 기록이 없습니다.</p>
        {% endif %}
    </div>
  </div>

  <style>
    #history-preview-container{
      flex-direction: row;
    }





    .preview-container {
    display: flex;

    text-align: center;
    margin-bottom: 15px;
  }
  .upload-section {
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* 남은 공간 차지 */
    gap: 10px;
    padding: 15px;
 
    border-radius: 10px;

    box-sizing: border-box;
  }
  .result-section {
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* 남은 공간 차지 */
    gap: 10px;
    padding: 15px;
    border-radius: 10px;
    width: 350px;
    box-sizing: border-box;
  }
  .product-comment {
    word-wrap: break-word; /* 긴 단어가 있으면 줄바꿈 */
    word-break: break-word; /* 자동 줄바꿈 */
    overflow-wrap: break-word; /* 줄바꿈 유지 */
    white-space: normal; /* 기존 nowrap이 적용되었을 가능성 차단 */
    max-width: 100%; /* 부모 컨테이너 내에서 넘치지 않도록 설정 */
    flex-direction: column;
  }
  .result-section {
    width: 100%;
  }

  /* 카테고리 정보 */
  .result-section {
    display: flex;
    flex-direction: column;
    gap: 3px;
  }

  .result-section p {
    font-size: 14px;
    display: flex;
  }
  @media only screen and (max-width: 548px) {
  #result-section p{
    font-size: 12px;
  }
}  

  .result-section .bold {
    font-weight: bold;
    margin-right: 8px;
  }

  </style>
  
{% endblock content%}

{% block extra_css %}
<link
  rel="stylesheet"
  type="text/css"
  href="{% static 'closet/css/input.css' %}"
/>

<link rel="stylesheet" href="{% static 'closet/css/recommendation_section.css' %}">

{% endblock extra_css %}
