{% extends "base.html" %} {% load static %} {% block extra_css %}
<link
  rel="stylesheet"
  href="{% static 'closet/css/dashboard_recommendation.css' %}"
/>
{% endblock %} {% block content %} {% comment %}테스트를 위해 임시로 만든
페이지{% endcomment %} {% include "closet/home/slide_weather.html" %}<!-- 줄바꿈 유지 -->
<style>
  body {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 2rem;
    width: 600px;
    margin-inline: 0;
    background-color: white;
  }
  h1 {
    color: var(--color-gray-darkest);
    font: var(--font-title-1);
  }
  .Wrapper {
    display: flex;
    justify-content: center;
    width: 100%;
  }
  .mainContainer {
    width: 95%;
  }
  .aiTitle {
    width: 90%;
  }
  .title {
    font: var(--font-title-2);
    color: var(--color-gray-dark);
    width: 90%;
  }
  .btn {
    margin-block: 3rem;
    color: white;
    background-color: black;
    width: 10.5625rem;
    height: 2.3125rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-style: normal;
    font-weight: 600;
    line-height: normal;
    cursor: pointer;
  }
  section {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  h5 {
    color: var(--color-gray-medium);
    font-size: 0.6875rem;
    font-style: normal;
    font-weight: 600;
    line-height: normal;
  }
</style>
<div class="Wrapper">
  <div class="mainContainer">
    {% if user.is_authenticated %}
    <h1>{{ user.nickname }}님,<br />코디나우에 오신 것을 환영합니다.</h1>
    {% include "closet/home/weather.html" %}
    <hr />
    <section>
      <div class="aiTitle">
        <div class="title">AI 나만의 맞춤 코디 추천</div>
        <h5>혼자서 코디하기가 어렵다면? AI 연관 코디 도움을 받아보세요.</h5>
      </div>
      <button
        class="btn"
        onclick="location.href='{% url 'closet:upload_outfit'%}'"
      >
        AI 코디 받으러 가기
      </button>
    </section>

    <hr />
    <section>
      <div class="title">나만의 옷장</div>
      <button
        class="btn"
        onclick="location.href='{% url 'closet:mycloset_view' %}'"
      >
        나의 옷장
      </button>
    </section>

    <!-- 디버깅을 위한 출력 -->
    <div style="display: none">
      Debug Info: latest_recommendation exists: {% if latest_recommendation
      %}yes{% else %}no{% endif %} latest_recommendation type: {{
      latest_recommendation|default:"None"|stringformat:"s" }} html_content
      exists: {% if latest_recommendation.html_content %}yes{% else %}no{% endif
      %}
    </div>
    <hr />
    <!-- 조건 수정 -->
    {% if latest_recommendation and latest_recommendation.html_content %}
    <section class="recent-recommendation">
      <h2>
        {{ latest_recommendation.user.nickname }}님이 {{ time_diff }}에 받은
        코디 추천입니다
      </h2>
      <div class="recommendation-content">
        {{ latest_recommendation.html_content|safe }}
      </div>
    </section>
    {% else %}
    <!-- 디버깅을 위한 대체 내용 -->
    <section class="recent-recommendation" style="display: none">
      <p>No recommendation found</p>
      <p>Context data: {{ latest_recommendation }}</p>
    </section>
    {% endif %}
    <button
      class="btn"
      id="bottom-btn"
      onclick="location.href='{% url 'closet:upload_outfit'%}'"
    >
      AI 코디 받으러 가기
    </button>
  </div>
</div>

{% endif %}<!-- 줄바꿈 유지 -->
{%endblock%}
